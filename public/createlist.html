<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <title>test client</title>
    <script src="superfetch2.js"></script>
</head>

<body>

    <input id="inpListName" placeholder="List name">
    <button id="btnCreate">Create new list</button>

</body>

<script>

    var inpListName = document.getElementById("inpListName");

    //button click ---------------------------------
    btnCreate.onclick = function() {




        var upload = JSON.stringify({
            listname: inpListName.value,
        });

        //var url = "http://localhost:8080/todo/todolist/";
        var token = JSON.parse(localStorage.getItem("logindata")).token;
        var url = "http://localhost:8080/todo/todolist/?token=" + token;

        var cfg = {
            method: "POST",
            body: upload
        }

        superfetch(url, "json", succ, error, cfg);


        //success --------------------------------------
        function succ(data) {
            console.log(data);
            console.log("success");
        }

        //error ----------------------------------------
        function error(err) {
            console.log(err);
        }

    }




</script>

    <style>
    input, button, textarea, label {
        width: 100%;
        margin-bottom: 8px;
        height: 40px;
        font-size: 1.5em;
        font-family: sans-serif;
    }
</style>


</html>
